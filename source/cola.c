/*******************************************************************************
  @file     +cola.c+
  @brief    +Driver para +
  @author   +GRUPO 2+
 ******************************************************************************/

/*******************************************************************************
 * INCLUDE HEADER FILES
 ******************************************************************************/
#include "cola.h"

/*******************************************************************************
 * CONSTANT AND MACRO DEFINITIONS USING #DEFINE
 ******************************************************************************/

/*******************************************************************************
 * ENUMERATIONS AND STRUCTURES AND TYPEDEFS
 ******************************************************************************/



/*******************************************************************************
 * VARIABLES WITH GLOBAL SCOPE
 ******************************************************************************/


/*******************************************************************************
 * FUNCTION PROTOTYPES FOR PRIVATE FUNCTIONS WITH FILE LEVEL SCOPE
 ******************************************************************************/


/*******************************************************************************
 * ROM CONST VARIABLES WITH FILE LEVEL SCOPE
 ******************************************************************************/


/*******************************************************************************
 * STATIC VARIABLES AND CONST VARIABLES WITH FILE LEVEL SCOPE
 ******************************************************************************/


/*******************************************************************************
 *******************************************************************************
                        GLOBAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/
void colaInit(cola_t* cola) {
	cola->count = 0;
	cola->inPtr = cola->buffer;
	cola->outPtr = cola->buffer;
}

bool colaPush(cola_t* cola, unsigned const char data) {
	if (cola->count > Q_SIZE-1)
		return false;
	else {
		*(cola->inPtr)++ = data;
			cola->count++;
		if (cola->inPtr == cola->buffer+Q_SIZE)
			cola->inPtr = cola->buffer;
		return true;
	}
}

unsigned char colaPull(cola_t* cola) {
	unsigned char data;
	data = *(cola->outPtr)++;
	if(cola->count>0)
		cola->count--;
	if (cola->outPtr == cola->buffer+Q_SIZE)
		cola->outPtr = cola->buffer;
	return data;
}


/*******************************************************************************
 *******************************************************************************
                        LOCAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/
